{% extends 'base.html' %}

{% block content %}

    <style>
        body {
            margin: 0;
        }
        html, body, .map-canvas, .app {
            height: 100%;
        }
    </style>

    <div class="app" ng-controller="MapCtrl">
        <div ng-repeat="marker in myMarkers" ui-map-marker="myMarkers[$index]" ui-event="{'map-click': 'openMarkerInfo(marker)'}"></div>

        <div ui-map-info-window="myInfoWindow">
            <h1>Marker</h1>
            Lat: <input ng-model="currentMarkerLat">, Lng: <input ng-model="currentMarkerLng">
            <a ng-click="setMarkerPosition(currentMarker, currentMarkerLat, currentMarkerLng)">Set Position</a>
        </div>

        <div ui-map="myMap" ui-options="mapOptions" class="map-canvas" ui-event="{'map-idle' : 'onMapIdle()'}"></div>
    </div>

    <script>
        var scout = {};
        scout.markers = {{ markers_json|safe }};
    </script>

    <script src="{{ STATIC_URL }}libs/angular/angular.js"></script>
    <script src="{{ STATIC_URL }}libs/angular-ui-map/ui-map.js"></script>
    <script src="{{ STATIC_URL }}libs/angular-ui-utils/ui-utils.js"></script>
    <script src="{{ STATIC_URL }}js/app.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=onGoogleReady"></script>

{% endblock %}